syntax = "proto3";

package ekyc.v1;

option go_package = "e-kyc/shared/proto/ekyc/v1;ekycv1";

message ImagePayload {
  bytes content = 1;
  string mime_type = 2;
}

message FaceMatchJobHandle {
  string job_id = 1;
  string queue = 2;
}

message LivenessJobHandle {
  string job_id = 1;
  string queue = 2;
}

message StartFaceMatchRequest {
  string session_id = 1;
  ImagePayload ktp_image = 2;
  ImagePayload selfie_image = 3;
  double face_match_threshold = 4;
}

message StartFaceMatchResponse {
  FaceMatchJobHandle job = 1;
}

message StartLivenessRequest {
  string session_id = 1;
  repeated ImagePayload liveness_frames = 2;
  repeated string gestures = 3;
}

message StartLivenessResponse {
  LivenessJobHandle job = 1;
}

service EkycSupportService {
  rpc StartFaceMatchJob(StartFaceMatchRequest) returns (StartFaceMatchResponse);
  rpc StartLivenessJob(StartLivenessRequest) returns (StartLivenessResponse);
}
